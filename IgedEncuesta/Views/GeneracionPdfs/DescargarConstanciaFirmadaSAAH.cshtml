@{
    ViewBag.Title = "DescargarConstanciaFirmadaSAAH";
    Layout = "~/Views/Shared/_LayoutMenu.cshtml";
}


@Html.Partial("_DialogPopup")

<br /><br />
<div class="centrarDiv " id="contenedor">
    <table class="marcoFormulario  efecto2 efecto1 " style="margin: auto; width: 1010px; text-transform: uppercase; font-family: 'Roboto'; font-size: 12px;margin-top:20px;">

        <tr>
            <td style="margin-top: 5px;">
                <br />
                <h5>Descargar Constancia firmada</h5>                
                <br />
            </td>
        </tr>

        <tr>

            <td>
                <div class="fondo " style="text-align:center;margin:0 auto; border: 1px solid #ccc; border-radius: 5px;width: 90%;text-align:center;padding:20px;">
                    <table style="margin:0 auto;">
                        <tr>
                            <td style="text-align: center;font-family: 'Roboto'; font-size: 13px;">
                                Descargar Constancia firmada
                                <br>
                                Favor ingrear el código de hogar.
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="text" id="hogcodigo" name="hogcodigo" style="margin: auto;width:180px" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div id="mensajeError">@ViewBag.Mensaje </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <br />
                                <input type="button"  name="btnDescargarConstanciafirmada" value="Descargar Constancia firmada" id="btnDescargarConstanciafirmada" style="margin: auto;width:250px" />
                            </td>
                        </tr>
                        <tr>
                            <td>

                                <a hidden href="@Url.Action("DescargarArchivoConstanciaFirmada", "GeneracionPdfs", new { hogcodigo = "8HI49" })">
                                    <input type="button" name="btnlimpiarmensaje" id="btnlimpiarmensaje" value="Descargar Constancia firmada" />                                                                                
                                </a>
                            </td>
                        </tr>
                        
                        
                    </table>
                </div>
                <br />
            </td>
        </tr>

    </table>
</div>




<script type="text/javascript">

    //andrés quintero 07/01/2020
    $(document).ajaxStop(function () {
        console.log('entro a la funcion loadingoverlay stop');
        $.LoadingOverlay("hide");
        $("#CargandoDatosMaestro").hide();
    });

    $(document).ajaxStart(function () {
        console.log('entro a la funcion loadingoverlay start');
        var ruta_Cargando2 = '@Url.Content("~/Content/Imagenes/Cargando2.gif")';
        $.LoadingOverlay("show", "image: " + ruta_Cargando2);
        $("#CargandoDatosMaestro").show();
    });
    ///

    $('#btnDescargarConstanciafirmada').click(function (e) {
        $("#mensajeError").html('');


        if ($("#hogcodigo").val() != "") {
            var p_hogcodigo = $("#hogcodigo").val();
            location.href = '@Url.Action("DescargarArchivoConstanciaFirmada", "GeneracionPdfs")?hogcodigo=' + p_hogcodigo;
            $('input[type="text"]').val('');
            $("#mensajeError").html('Archivo descargado exitosamente');
            alert('Archivo descargado exitosamente');

        } else {
            alert("Digite un código de Hogar.");
        }


    });


</script>


